<!DOCTYPE html>
<html lang="en" xmlns:th="thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>All tasks</title>

    <link rel="stylesheet" href="/webjars/bootstrap/5.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="/webjars/bootstrap-icons/1.8.3/font/bootstrap-icons.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-8">
                <h1 class="mt-3 mb-3">Todolist</h1>
            </div>
            <div class="col-8">
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Title</th>
                        <th scope="col">Created</th>
                        <th scope="col">Updated</th>
                        <th scope="col">Is complete</th>
                        <th scope="col">Edit</th>
                        <th scope="col">Delete</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="task: ${tasks}">
                        <td th:text="${task.getId()}">1</td>
                        <td th:text="${task.getTitle()}">Todo something</td>
                        <td th:text="${task.getCreatedAt()}">2022-06-01</td>
                        <td th:text="${task.getUpdatedAt()}">2022-06-01</td>
                        <td>
                            <input type="checkbox"
                                   th:id="'complete-checkbox-' + ${task.getId()}"
                                   class="complete-checkbox">
                        </td>
                        <td>
                            <a class="edit-button btn btn-sm btn-outline-primary"
                               th:id="'edit-button-' + ${task.getId()}">
                                <i class="bi bi-pencil"></i>
                            </a>
                        </td>
                        <td>
                            <button type="button"
                                    th:id="'delete-button-' + ${task.getId()}"
                                    class="btn btn-sm btn-outline-danger">
                                <i class="bi bi-trash3"></i>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-8 text-end">
                <button type="button" class="btn btn-primary">Add task</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Edit task</h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <form th:method="PATCH" th:action="@{/tasks/{id}(id=${task.getId()})}" th:object="${task}">
                        <div class="form-group mb-2">
                            <label for="inputTitle">Title</label>
                            <input th:field="*{title}" type="text" class="form-control" id="inputTitle">
                        </div>
                        <div class="form-check mb-2">
                            <label for="completeCheck">Complete!</label>
                            <input th:field="*{complete}" type="checkbox" class="form-check-input" id="completeCheck">
                        </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/webjars/jquery/3.6.0/jquery.min.js"></script>
    <script src="/webjars/popper.js/2.9.3/umd/popper.min.js"></script>
    <script src="/webjars/bootstrap/5.1.3/js/bootstrap.min.js"></script>
    <script src="/resources/js/tasks.js"></script>
</body>
</html>